# 0007.c > 22289번 Solve

재귀 vs iterative 문제인건가...?

# 0006.c > Solve!

- fft > 재귀함수 안쓰기
- unit은 10의 자리수가 최대?

두배 초과해야하니까
300,000 *2 = 600,000 
2^18 = 262144
2^19 = 524288
2^20 = 1048576
넉넉잡아 2^20 이라고 계산하면 20번 Divide가 됨.
Divde 한번당)
A +- B*오메가
오메가 <= 1 
2를 곱한다고 생각하면, 한번 Divde당 2배, 20번 > 2^20배 = 1024*1024 = 1048576 (배)
FFT에서 unit * 1048576
Mult에서 unit^2 * 2^40; -> 




    for(i = 0; i < fftSize; i++) printf("%d ", (int)(x[i].real)); printf("\n");



   padding = fftSize - bSize;
    for(i = 0; i < padding; i++) y[i] = 0;
    tmp = strlen(B)%unit;
    if(tmp != 0){
        strncpy(subStr, B, tmp);
        subStr[4] = '\0';
        y[i++] = atoi(subStr);    
    }
    for (; i < fftSize; i++) {
        strncpy(subStr, B + tmp, 4);
        subStr[4] = '\0';
        y[i] = atoi(subStr);     
        tmp += 4;
    }









// 젤 하위부터 4 단위로 자르기



// 참조 코드
#include <stdio.h>
#include <complex.h>
#include <math.h>

#define _USE_MATH_DEFINES

void fft(complex double* x, int N) {
    if(N <= 1) return;

    complex double t;
    complex double even[N/2], odd[N/2];
    for(int i = 0; i < N/2; i++) {
        even[i] = x[2*i];
        odd[i] = x[2*i + 1];
    }

    fft(even, N/2);
    fft(odd, N/2);

    for(int i = 0; i < N/2; i++) {
        t = cexp(-2 * I * M_PI * i / N) * odd[i];
        x[i] = even[i] + t;
        x[i + N/2] = even[i] - t;
    }
}

void ifft(complex double* x, int N) {
    if(N <= 1) return;

    complex double t;
    complex double even[N/2], odd[N/2];
    for(int i = 0; i < N/2; i++) {
        even[i] = x[2*i];
        odd[i] = x[2*i + 1];
    }

    ifft(even, N/2);
    ifft(odd, N/2);

    for(int i = 0; i < N/2; i++) {
        t = cexp(2 * I * M_PI * i / N) * odd[i];
        x[i] = (even[i] + t) / 2.0;
        x[i + N/2] = (even[i] - t) / 2.0;
    }
}

int main() {
    int i, tmp, max;
    int N, size;

    scanf("%d", &N);
    size = 1;
    while(size < 2*N) size *= 2;

    complex double x[size], y[size];
    for(i = 0; i < N; i++){
        scanf("%d", &tmp);
        x[i] = tmp;
        x[N + i] = tmp;
    }
    for(i = 2*N;i<size;i++) x[i] = 0;

    for(i = 0; i < N; i++) {
        scanf("%d", &tmp);
        y[i] = tmp;
    }
    for(i = N; i < size; i++) y[i] = 0;
    
    fft(x, size);
    fft(y, size);

    for(int i = 0; i < size; i++) x[i] *= conj(y[i]);

    ifft(x, size);

    max = 0;
    for(i = 0; i < size; i++) {
        tmp = (int)(creal(x[i]) + (creal(x[i]) ? 0.5 : -0.5));
        if(tmp > max) max = tmp;
    }
    printf("%d\n", max);

    return 0;
}
